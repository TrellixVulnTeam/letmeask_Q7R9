{"ast":null,"code":"import _regeneratorRuntime from\"/home/jefferson/\\xC1rea de Trabalho/estudos/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/jefferson/\\xC1rea de Trabalho/estudos/letmeask/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import{useHistory,useParams}from'react-router-dom';import logoImg from\"../assets/images/logo.svg\";import deleteImg from\"../assets/images/delete.svg\";import checkImg from\"../assets/images/check.svg\";import answerImg from\"../assets/images/answer.svg\";import{Button}from'../components/Button';import{Question}from'../components/Question';import{RoomCode}from'../components/RoomCode';// import { useAuth } from '../hooks/useAuth';\nimport{useRoom}from'../hooks/useRoom';import{database}from'../services/firebase';import'../styles/room.scss';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export function AdminRoom(){// const { user } = useAuth();\nvar history=useHistory();var params=useParams();var roomId=params.id;var _useRoom=useRoom(roomId),title=_useRoom.title,questions=_useRoom.questions;function handleEndRoom(){return _handleEndRoom.apply(this,arguments);}function _handleEndRoom(){_handleEndRoom=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return database.ref(\"rooms/\".concat(roomId)).update({endedAt:new Date()});case 2:history.push('/');case 3:case\"end\":return _context.stop();}}},_callee);}));return _handleEndRoom.apply(this,arguments);}function handleDeleteQuestion(_x){return _handleDeleteQuestion.apply(this,arguments);}function _handleDeleteQuestion(){_handleDeleteQuestion=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(questionId){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!window.confirm('Tem certeza que você deseja excluir esta pergunta?')){_context2.next=3;break;}_context2.next=3;return database.ref(\"rooms/\".concat(roomId,\"/questions/\").concat(questionId)).remove();case 3:case\"end\":return _context2.stop();}}},_callee2);}));return _handleDeleteQuestion.apply(this,arguments);}function handleCheckQuestionAnswered(_x2){return _handleCheckQuestionAnswered.apply(this,arguments);}function _handleCheckQuestionAnswered(){_handleCheckQuestionAnswered=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(questionId){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.next=2;return database.ref(\"rooms/\".concat(roomId,\"/questions/\").concat(questionId)).update({isAnswered:true});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return _handleCheckQuestionAnswered.apply(this,arguments);}function handleHighLightQuestion(_x3){return _handleHighLightQuestion.apply(this,arguments);}function _handleHighLightQuestion(){_handleHighLightQuestion=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(questionId){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return database.ref(\"rooms/\".concat(roomId,\"/questions/\").concat(questionId)).update({isHighlighted:true});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _handleHighLightQuestion.apply(this,arguments);}return/*#__PURE__*/_jsxs(\"div\",{id:\"page-room\",children:[/*#__PURE__*/_jsx(\"header\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"content\",children:[/*#__PURE__*/_jsx(\"img\",{src:logoImg,alt:\"Letmeask\"}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(RoomCode,{code:roomId}),/*#__PURE__*/_jsx(Button,{isOutlined:true,onClick:handleEndRoom,children:\"Encerrar sala\"})]})]})}),/*#__PURE__*/_jsxs(\"main\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"room-title\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Sala \",title]}),questions.length>0&&/*#__PURE__*/_jsxs(\"span\",{children:[questions.length,\" pergunta(s)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"question-list\",children:questions.map(function(question){return/*#__PURE__*/_jsxs(Question,{content:question.content,author:question.author,isAnswered:question.isAnswered,isHighlighted:question.isHighlighted,children:[!question.isAnswered&&/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleCheckQuestionAnswered(question.id);},children:/*#__PURE__*/_jsx(\"img\",{src:checkImg,alt:\"Marcar pergunta como respondida\"})}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleHighLightQuestion(question.id);},children:/*#__PURE__*/_jsx(\"img\",{src:answerImg,alt:\"Dar destaque \\xE0 pergunta\"})})]}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:function onClick(){return handleDeleteQuestion(question.id);},children:/*#__PURE__*/_jsx(\"img\",{src:deleteImg,alt:\"Remover pergunta\"})})]},question.id);})})]})]});}","map":{"version":3,"sources":["/home/jefferson/Área de Trabalho/estudos/letmeask/src/pages/AdminRoom.tsx"],"names":["useHistory","useParams","Button","Question","RoomCode","useRoom","database","AdminRoom","history","params","roomId","id","title","questions","handleEndRoom","ref","update","endedAt","Date","push","handleDeleteQuestion","questionId","window","confirm","remove","handleCheckQuestionAnswered","isAnswered","handleHighLightQuestion","isHighlighted","logoImg","length","map","question","content","author","checkImg","answerImg","deleteImg"],"mappings":"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","sourcesContent":["import { useHistory, useParams } from 'react-router-dom'\n\nimport logoImg from '../assets/images/logo.svg';\nimport deleteImg from '../assets/images/delete.svg';\nimport checkImg from '../assets/images/check.svg';\nimport answerImg from '../assets/images/answer.svg';\n\nimport { Button } from '../components/Button';\nimport { Question } from '../components/Question';\nimport { RoomCode } from '../components/RoomCode';\n// import { useAuth } from '../hooks/useAuth';\nimport { useRoom } from '../hooks/useRoom';\nimport { database } from '../services/firebase';\n\nimport '../styles/room.scss';\n\ntype RoomParams = {\n  id: string;\n}\n\nexport function AdminRoom() {\n  // const { user } = useAuth();\n  const history = useHistory()\n  const params = useParams<RoomParams>();\n  const roomId = params.id;\n\n  const { title, questions } = useRoom(roomId)\n\n  async function handleEndRoom() {\n    await database.ref(`rooms/${roomId}`).update({\n      endedAt: new Date(),\n    })\n\n    history.push('/');\n  }\n\n  async function handleDeleteQuestion(questionId: string) {\n    if (window.confirm('Tem certeza que você deseja excluir esta pergunta?')) {\n      await database.ref(`rooms/${roomId}/questions/${questionId}`).remove();\n    }\n  }\n\n  async function handleCheckQuestionAnswered(questionId: string) {\n    await database.ref(`rooms/${roomId}/questions/${questionId}`).update({\n      isAnswered: true,\n    });\n  }\n\n  async function handleHighLightQuestion(questionId: string) {\n    await database.ref(`rooms/${roomId}/questions/${questionId}`).update({\n      isHighlighted: true,\n    });\n  }\n\n  return (\n    <div id=\"page-room\">\n      <header>\n        <div className=\"content\">\n          <img src={logoImg} alt=\"Letmeask\" />\n          <div>\n            <RoomCode code={roomId} />\n            <Button isOutlined onClick={handleEndRoom}>Encerrar sala</Button>\n          </div>\n        </div>\n      </header>\n\n      <main>\n        <div className=\"room-title\">\n          <h1>Sala {title}</h1>\n          { questions.length > 0 && <span>{questions.length} pergunta(s)</span> }\n        </div>\n\n        <div className=\"question-list\">\n          {questions.map(question => {\n            return (\n              <Question\n                key={question.id}\n                content={question.content}\n                author={question.author}\n                isAnswered={question.isAnswered}\n                isHighlighted={question.isHighlighted}\n              >\n                {!question.isAnswered && (\n                  <>\n                    <button\n                      type=\"button\"\n                      onClick={() => handleCheckQuestionAnswered(question.id)}\n                    >\n                      <img src={checkImg} alt=\"Marcar pergunta como respondida\" />\n                    </button>\n\n                    <button\n                      type=\"button\"\n                      onClick={() => handleHighLightQuestion(question.id)}\n                    >\n                      <img src={answerImg} alt=\"Dar destaque à pergunta\" />\n                    </button>\n                  </>\n                )}\n\n                <button\n                  type=\"button\"\n                  onClick={() => handleDeleteQuestion(question.id)}\n                >\n                  <img src={deleteImg} alt=\"Remover pergunta\" />\n                </button>\n              </Question>\n            );\n          })}\n        </div>\n      </main>\n    </div>\n  );\n}"]},"metadata":{},"sourceType":"module"}